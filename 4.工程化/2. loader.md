# loader 是什么，有什么作用

帮助 webpack 特不同类型的文件转换为 webpack 可识别的模块（webpack 处理不了的文件，要用 loader）

```
webpack 的编译器
webpack默认只解析js和json。loader可以让webpack支持解析更多格式的文件
比如.css // .vue //.less // .sass // .jsx //.ts
一个loader只做一件事
```

# 常见的 loader

### 处理静态资源 css

处理 css 样式

- css-loader：是将 css 转化为 js，转化为字符串插入到打包文件中，样式还没有生效。（css 打包到 js 中）
- style-loader：借助 style-loader 使样式生效。可以在 head 插入一个 style 标签，然后将 css 从打包文件中提取出来，插入到 style 里面（创建 style 标签，插入到 html 中）

处理 less 资源

- less-loader: 将 less 解析成相应的 css

处理 stylus 资源

- stylus-loader 将 stylus 转化为 css

处理 css 兼容性

- postcss-loader: 处理一些浏览器前缀

  ```
  安装postcss-loader autoprefix  新建文件进行配置

  处理css成ast抽象语法树，如何把抽象语法树准换成相应的css
  借助postcss的插件  autoprefixer  浏览器自动补全，css3加前缀
      overrideBrowserslist重写覆盖package.json中的浏览器版本
      还有别的插件：pxtorem  postcss-plugin-px2erm
  ```

### 处理图片资源

- file-loader: 处理静态文件 .txt .md .png .pdf .word 第三方字体内容不需要加工，直接输出到打包文件
  ```
  不做处理，文件名直接是一坨，可以对其进行设置参数
  设置参数:options
  ```
- url-loader：在⽂件很⼩的情况下以 base64 的⽅式把⽂件内容注⼊到代码中去 （大文件转化后会变大，小图片不会）

- image-loader：加载并且压缩图⽚⽂件

### 修改输出文件目录（css 到 css img 到 img js 到 js 目录中 ）

- generator

### 格式检查

- eslint-loader：通过 ESLint 检查 JavaScript 代码

### 兼容性

- babel-loader：把 ES6 转换成 ES5

# 写一个 loader

## loader 概念

1. loader 就是一个函数，但是不能使用箭头函数
2. 当 webpack 解析资源时，会调用相应的 loader 处理
3. loader 接受到文件内容作为参数，返回内容出去
4. 默认 从下向上 从右向左
5. this 指向 loader 实例 访问方法

```js
// 同步loader

// module.exports function (content){
//   return content;
// };
module.exports = function (content, map, meta){
  // 露三个茶效：SRe 表景系套裝器
  // 第二个参效：content 处理后的内容
  // 第三个参改：Source-map 继续传递 source-map
  // 第四个参效：meta 给下一个1oader传递参效
  this.callback (null, content, map, meta
}
```

## 写一个 clean-log-loader

```js
module.exports = function (content){
  // ，清除文件内容中 console.log(xxx)
  return content.replace (/consolel. log\(.*V);P/g，");
}
```

## 加一些作者信息 banner-loader

```js

const schema = {
  "type": "object",
  "properties":{
    author:{
      "type":"string"
    }
  }
  "additionalProperties": false
}
module.exports = function (content){
// schema对options的發证规列厂
// schema行合JSON Schema的规则
const options = this.getoptions(schema)；
const prefix =`
/**
 * Author: $foptions.author
 */
`
  return prefix+content;
}
```
